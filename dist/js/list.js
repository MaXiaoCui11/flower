require.config({paths:{jquery:"../js/jquery-1.11.3"}}),require(["jquery"],function(i){function t(s){if(t.obj)return s.obj;this.pag=i(s),this.list=this.pag,this.index=this.pag.children(".list-principal"),this.config={url:"",itemNum:4,sidepage:1,fingerNum:1,pageMax:7},t.obj=this}i.extend(t.prototype,{init:function(t){var s=this;i.extend(this.config,t),this.load(),this.list.on("click","li",function(){console.log(i(this).attr("data-id")),location.href="details.html?id="+i(this).attr("data-id")}),this.index.on("click","li",function(){s.currentPage!=i(this).index()&&(s.currentPage=i(this).index(),s.changepanel())})},load:function(){var t=this;i.ajax({url:this.config.url}).then(function(i){t.res="object"==typeof i?i:"",t.sortArr=JSON.parse(JSON.stringify(t.res)),t.config.itemNum=t.sortArr.lenght,t.paging()})},paging:function(){this.pageNum=Math.ceil(this.sortArr.length/this.config.itemNum),this.currentPage=this.config.fingerNum-1,this.isload=!0,this.rendering()},rendering:function(){if(0==this.sortArr.length){this.list.html('<p class="no-data">暂无数据！</p>')}for(var i="",t=0;t<this.sortArr.length&&!(t>=this.sortArr.length);t++){var s=this.sortArr[t];i+='<li><a href="#" ><div class="list-item-img"><img data-original="'+s.url+'" src="'+s.url+'" style="display: inline;"></div><div class="list-item-info"><h5 class="list-item-name">'+s.title+'</h5><p class="list-item-desc">'+s.cont+'</p><div class="box"><span class="list-item-price" data-id="'+s.id+'">¥&nbsp;'+s.pirce+'</span><span class="btn-buy"></span></div></div></a></li>'}if(this.list.html(i),this.isload){var r="";if(this.pageNum>1){for(t=0;t<this.pageNum;t++)r+="<li>"+(t+1)+"</li>";this.index.html(r),this.index.children().eq(this.currentPage).addClass("active")}else this.index.html(r);this.isload=!1}},changepanel:function(){this.index.children("li").eq(this.currentPage).addClass("active").siblings().removeClass("active"),i("html,body").animate({scrollTop:this.pag.offset().top-100},400),this.rendering()},sortPrice:function(i){if(0!=i){for(var t=[],s=null,r=0;r<this.sortArr.length;r++){s=r;for(var e=r+1;e<this.sortArr.length;e++)parseInt(this.sortArr[s].pirce)>=parseInt(this.sortArr[e].pirce)&&(s=e);t.push(this.sortArr[s]),this.sortArr.splice(s,1),r=-1}this.sortArr=null,1==i&&(this.sortArr=t),2==i&&(this.sortArr=t.reverse()),t=null,this.currentPage=0,this.paging()}else this.paging()},filterData:function(i,t){if(this.sortArr=JSON.parse(JSON.stringify(this.res)),"{}"!=JSON.stringify(t)){for(var s=[],r=!0,e=0;e<this.sortArr.length;e++){r=!0;for(var n in t)if(void 0!=t[n]&&t[n]!=this.sortArr[e][n]){r=!1;break}r&&s.push(this.sortArr[e])}this.sortArr=null,this.sortArr=s,s=null,this.sortPrice(i)}else this.sortPrice(i)}});var s=new t(".list-principal");s.init({url:"../dist/js/list.json"});var r={},e=!0;i("#goods-pirce").on("click",function(){i(this).addClass("active").siblings().removeClass("active"),e?(s.filterData(1,r),i(".down").css({"border-top-color":"#ff6a00"}),i(".to").css({"border-bottom-color":"#333"}),e=!1):(s.filterData(2,r),i(".to").css({"border-bottom-color":"#ff6a00"}),i(".down").css({"border-top-color":"#333"}),e=!0)}),i(".js-one").click(function(){r={},s.filterData(1,r),i(this).addClass("active").siblings().removeClass("active")}),i(".one").click(function(){var t=i(this).find("a").text();r.hua=t,s.filterData(1,r),i(this).addClass("active").siblings().removeClass("active")}),i(".list-principal").on("click","li",function(){location.href="detail.html?id="+i(this).find(".list-item-price").attr("data-id")})});